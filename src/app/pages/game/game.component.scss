@use '@angular/material' as mat;
@import '../../../styles.scss';
@include mat.core();

.game-menu {
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
    margin: 1rem auto;
    height: 90vh;

    button {
        margin-bottom: 1rem;
    }

    h1 {
        margin-bottom: 1rem;
    }

    h2 {
        margin-bottom: 0;
        margin-top: 0;
    }

    .row {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    mat-icon {
        margin: 0;
    }
}

.game-area {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    padding: 1rem;

    .row {
        width: 100%;
        max-width: 600px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .timer-row {
        display: flex;
        justify-content: center;
        align-items: center;
        min-width: 15%;
        mat-icon {
            margin-right: 1rem;
        }
    }

    mat-progress-bar {
        margin-right: 2rem;
        @include mat.progress-bar-overrides((
            track-height: 1rem,
            active-indicator-height: 1rem,
        ));
    }

    .game-controls {
        @media screen and (max-width: $mobile-breakpoint) {
            position: fixed;
            bottom: 0;
            padding: 1rem;
            box-sizing: border-box;
        }
    }

    @media screen and (max-width: $mobile-breakpoint) {
        .row {
            margin: 0 2rem;
        }

        .timer-row {
            min-width: 20%;
        }
    }
}

.game-container {
    display: flex;
    flex-wrap: wrap;
    max-width: 800px;
    align-items: center;
    justify-content: center;
    margin: 2rem auto;
}

.click-region {
    background-color: transparent;
    border: none;
    cursor: pointer;
    padding: 0;
    margin: 1rem;
    border: 1px solid transparent;

    @media screen and (max-width: $mobile-breakpoint) {
        margin: 0.5rem;
    }
    
}

.math-problem-display {
    margin-top: 2rem;
    font-weight: 600;
    font-size: 1.5rem;;
}

// remove disabled styles from click region
.click-region[disabled] {
    cursor: not-allowed;
    color: unset;
}

.streak-badge {
    /* Animated gradient text */
    background-size: 300% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    transition: transform .2s ease, filter .2s ease, text-shadow .2s ease;
}

/* Levels: higher streak = faster gradient + stronger glow */
.streak--warm {
    animation: gradientShift 10s linear infinite;
    color: transparent;
    font-weight: 700;
    background-image: linear-gradient(90deg, #34d399, #22d3ee, #a78bfa, #f472b6, #fb7185);
}

.streak--hot {
    animation: gradientShift 6s linear infinite, pulseGlow 2s ease-in-out infinite;
    color: transparent;
    font-weight: 700;
    background-image: linear-gradient(90deg, #34d399, #22d3ee, #a78bfa, #f472b6, #fb7185);
    text-shadow: 0 0 6px rgba(244, 114, 182, .45), 0 0 12px rgba(56, 189, 248, .35);
}

.streak--onfire {
    animation: gradientShift 4s linear infinite, pulseGlow 1.6s ease-in-out infinite;
    color: transparent;
    font-weight: 700;
    background-image: linear-gradient(90deg, #34d399, #22d3ee, #a78bfa, #f472b6, #fb7185);
    text-shadow: 0 0 8px rgba(244, 114, 182, .55), 0 0 16px rgba(167, 139, 250, .45);
    transform: scale(1.04);
}

.streak--legend {
    animation: gradientShift 3s linear infinite, pulseGlow 1.2s ease-in-out infinite;
    color: transparent;
    font-weight: 700;
    background-image: linear-gradient(90deg, #34d399, #22d3ee, #a78bfa, #f472b6, #fb7185);
    text-shadow: 0 0 10px rgba(251, 113, 133, .65), 0 0 20px rgba(34, 211, 238, .55), 0 0 26px rgba(167, 139, 250, .5);
    transform: scale(1.06);
}

@keyframes gradientShift {
    0%   { background-position: 0% 50%; }
    50%  { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

@keyframes pulseGlow {
    0%, 100% { filter: brightness(1); }
    50%      { filter: brightness(1.25); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
    .streak-badge,
    .streak--warm,
    .streak--hot,
    .streak--onfire,
    .streak--legend {
        animation: none !important;
        text-shadow: none !important;
        transform: none !important;
    }
}

.alert-text {
    color: mat.m2-get-color-from-palette($coral-palette, 900);
    font-weight: 600;
    animation: pulseGlow 2s ease-in-out infinite;
}
